# Optical Hitbox

一个基于红外光轴的自制 Hitbox 控制器项目。

## 为什么做这个项目

**零去抖延迟 (Zero Debounce Delay)**

传统机械开关在触点闭合瞬间会产生物理抖动，导致信号在短时间内多次通断。为了消除这种抖动，控制器固件必须加入去抖延迟（通常 5-15ms），等待信号稳定后才确认按键状态。

光轴则完全不同——它使用红外光的通断来检测按键，没有物理触点，自然也就没有抖动问题。这意味着：

- **真正的零延迟输入**：按下即触发，无需等待去抖
- **更快的连击响应**：快速按键不会丢失输入
- **更长的使用寿命**：无机械磨损，理论寿命更长

对于格斗游戏、音游等对输入延迟敏感的场景，这几毫秒的差距可能就是胜负的关键。

## 项目简介

本项目是一个 DIY 光轴 Hitbox 控制器，使用红外发射和接收二极管作为按键开关，配合树莓派 Pico W 作为主控，运行 GP2040-CE 固件。

## 技术要求

本项目需要玩家具备以下技能：

- 基本的电子电路知识
- **0805 封装贴片元件的手工焊接能力**
- 基础的固件烧录操作

## 物料清单

| 名称 | 数量 | 规格/备注 | 参考价格 |
|------|------|-----------|----------|
| PCB | 1 | - | ~30 (5片约150) |
| 主控板 | 1 | 树莓派 Pico W | 30 |
| 矮光轴 | 104 | Keychron 拆机光轴 | 10 |
| 凯华矮轴 | 5+ | 功能键使用 | 20 |
| 矮轴键帽座 | 5+ | 功能键使用 | 20 |
| DOIO 键帽 | 1套 | 19颗/套 | 70 |
| 红外管 | 36 | 发射管+接收管各18，0805封装 | 20 |
| 贴片电阻 | 若干 | 10kΩ + 200Ω，0805封装 | 20 |
| 螺丝 | 若干 | M3*16 | 5 |
| 螺母 | 若干 | M3 | 5 |
| 亚克力板 | 6 | 定位板可选铝合金/碳纤维 | 80 |

**预估总成本：约 300 元**

## 项目文件

```
├── 光轴hitbox.pcbdoc      # PCB 设计源文件 (Altium Designer)
├── 亚克力夹层图纸.dwg      # 亚克力外壳 CAD 图纸
├── 制板文件/              # Gerber 制造文件，可直接发给 PCB 厂家
├── 烧录固件/              # 固件文件
│   ├── GP2040-CE_0.7.12_PicoW.uf2
│   └── flash_nuke.uf2    # 清除固件（重置用）
└── 清单.xlsx              # 物料清单
```

## 固件烧录

1. 按住 Pico W 上的 BOOTSEL 按钮，同时插入 USB 线
2. 电脑会识别为一个 U 盘
3. 如需重置，先拖入 `flash_nuke.uf2`，等待自动重启
4. 拖入 `GP2040-CE_0.7.12_PicoW.uf2` 完成烧录
5. 固件配置请参考 [GP2040-CE 官方文档](https://gp2040-ce.info/)

## 工作原理

光轴开关由红外发射管和接收管组成：
- 发射管持续发射红外光
- 接收管检测红外光强度
- 按下按键时，光路被遮挡或改变，接收管电阻变化
- 主控通过 ADC 或数字引脚检测状态变化

电路中 10kΩ 电阻用于分压/限流，200Ω 电阻用于限制红外发射管电流。

## 注意事项

- 焊接 0805 封装元件需要一定的手工操作能力
- 红外管有极性，注意区分发射管和接收管
- 建议先在废板上练习贴片焊接

## 许可证

本项目仅供学习和个人使用。

## 致谢

- [GP2040-CE](https://gp2040-ce.info/) - 开源游戏控制器固件
